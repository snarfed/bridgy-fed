# https://cloud.google.com/appengine/docs/flexible/reference/dispatch-yaml?tab=python

dispatch:
  - url: "*.brid.gy/admin/hub"
    service: hub

  - url: "*/queue/atproto-commit"
    service: hub

  - url: "*/hub/*"
    service: hub

  # Bounce's task queues.
  #
  # An alternative would be hostname. Right now, Bounce's tasks get sent to
  # bounce-migrate.uc.r.appspot.com, BF's to *.bridgy-federated.uc.r.appspot.com.
  # (as of 12/26/2025 they all go to atproto-hub.bridgy-federated.uc.r.appspot.com,
  # oddly, even if they don't come from hub, its service name is hub anyway. odd.)
  - url: "*/queue/review"
    service: bounce

  - url: "*/queue/migrate"
    service: bounce

  - url: "*/queue/*"
    service: router

  - url: "*/cron/*"
    service: router

  - url: "*/router/*"
    service: router

  - url: "*.brid.gy/xrpc/com.atproto.repo.importRepo"
    service: router

  - url: "*.brid.gy/xrpc/com.atproto.sync.subscribeRepos"
    service: hub

  - url: "bounce.anew.social/*"
    service: bounce
